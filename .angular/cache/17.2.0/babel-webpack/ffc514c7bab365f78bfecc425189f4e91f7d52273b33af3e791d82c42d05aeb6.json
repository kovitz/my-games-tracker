{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { RankCard, Rank } from '../_model/rank-card';\nimport { CategoryItem } from '../_model/category';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../user-session-handler\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../rating-input/rating-input.component\";\nfunction AddRankCardComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"rating-input\", 12);\n    i0.ɵɵlistener(\"onSelectedRating\", function AddRankCardComponent_div_18_Template_rating_input_onSelectedRating_3_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const rank_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.selectRankScore(rank_r2.code, $event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const rank_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.getRuleName(rank_r2.code));\n  }\n}\nfunction AddRankCardComponent_input_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 5);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AddRankCardComponent_input_22_Template_input_ngModelChange_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const bonus_r5 = restoredCtx.$implicit;\n      i0.ɵɵtwoWayBindingSet(bonus_r5.comment, $event) || (bonus_r5.comment = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const bonus_r5 = ctx.$implicit;\n    i0.ɵɵtwoWayProperty(\"ngModel\", bonus_r5.comment);\n  }\n}\nexport let AddRankCardComponent = /*#__PURE__*/(() => {\n  class AddRankCardComponent {\n    constructor(userSessionHandler) {\n      this.userSessionHandler = userSessionHandler;\n      this.onAddItem = new EventEmitter();\n      this.show = false;\n      this.newCategoryItem = new CategoryItem(); //TODO: need to add categoryItem matching eventually\n      this.newRankCardToPush = new RankCard();\n      //i guess we want a max 3 bonuses constraint?\n      this.emptyBonuses = [{\n        increment: 1,\n        comment: 'COMMENT HERE'\n      }, {\n        increment: 1,\n        comment: 'COMMENT HERE'\n      }, {\n        increment: 1,\n        comment: 'COMMENT HERE'\n      }];\n      userSessionHandler.onSessionLoaded.subscribe(() => this.ngOnInit());\n    }\n    ngOnInit() {\n      this.show = false;\n      this.activeListTitle = this.userSessionHandler.activeList.title;\n      this.newRankCardToPush.bonusDetails = this.emptyBonuses;\n      this.rules = this.userSessionHandler.activeList.rules;\n      this.rules.forEach(x => {\n        this.newRankCardToPush.ranks.push(new Rank(x.code, 0));\n      });\n    }\n    selectRankScore(ruleCode, score) {\n      this.newRankCardToPush.ranks.find(r => r.code == ruleCode).score = score;\n    }\n    getRuleName(ruleCode) {\n      return this.rules.find(r => r.code == ruleCode).ruleName;\n    }\n    clearBoxArt() {\n      this.newCategoryItem.thumb = '';\n    }\n    submit() {\n      this.userSessionHandler.addRankCardForSessionUser(this.newRankCardToPush, this.newCategoryItem);\n      this.onAddItem.emit();\n    }\n    static #_ = this.ɵfac = function AddRankCardComponent_Factory(t) {\n      return new (t || AddRankCardComponent)(i0.ɵɵdirectiveInject(i1.UserSessionHandler));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AddRankCardComponent,\n      selectors: [[\"add-rank-card\"]],\n      outputs: {\n        onAddItem: \"onAddItem\"\n      },\n      decls: 25,\n      vars: 7,\n      consts: [[\"type\", \"checkbox\", 1, \"enable\", 3, \"checked\", \"change\"], [1, \"active-list\"], [1, \"form-container\"], [1, \"header\"], [1, \"field\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"alt\", \"Image will appear here if URL works\", 1, \"select-allowed\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", \"value\", \"Clear\", 3, \"click\"], [\"no-repeat\", \"\", \"center\", \"\", 1, \"thumb\", 3, \"src\"], [\"class\", \"field\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", \"value\", \"Add To List!\", 1, \"submit\", 3, \"click\"], [3, \"onSelectedRating\"]],\n      template: function AddRankCardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"input\", 0);\n          i0.ɵɵlistener(\"change\", function AddRankCardComponent_Template_input_change_0_listener() {\n            return ctx.show = !ctx.show;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(1, \"div\", 1);\n          i0.ɵɵtext(2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3);\n          i0.ɵɵtext(5, \"Find a Game\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 4)(7, \"div\");\n          i0.ɵɵtext(8, \"Title\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"input\", 5);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function AddRankCardComponent_Template_input_ngModelChange_9_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.newCategoryItem.title, $event) || (ctx.newCategoryItem.title = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"div\", 4)(11, \"div\");\n          i0.ɵɵtext(12, \"Box Art URL (jpg, png, whatevs)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"input\", 6);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function AddRankCardComponent_Template_input_ngModelChange_13_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.newCategoryItem.thumb, $event) || (ctx.newCategoryItem.thumb = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"input\", 7);\n          i0.ɵɵlistener(\"click\", function AddRankCardComponent_Template_input_click_14_listener() {\n            return ctx.clearBoxArt();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(15, \"img\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"div\", 3);\n          i0.ɵɵtext(17, \"Rate the Game\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(18, AddRankCardComponent_div_18_Template, 4, 1, \"div\", 9);\n          i0.ɵɵelementStart(19, \"div\", 4)(20, \"div\");\n          i0.ɵɵtext(21, \"Bonuses and Reductions\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(22, AddRankCardComponent_input_22_Template, 1, 1, \"input\", 10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"div\", 4)(24, \"input\", 11);\n          i0.ɵɵlistener(\"click\", function AddRankCardComponent_Template_input_click_24_listener() {\n            return ctx.submit();\n          });\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"checked\", ctx.show);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"Adding to list: \\\"\", ctx.activeListTitle, \"\\\"\");\n          i0.ɵɵadvance(7);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.newCategoryItem.title);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.newCategoryItem.thumb);\n          i0.ɵɵadvance(2);\n          i0.ɵɵpropertyInterpolate(\"src\", ctx.newCategoryItem.thumb, i0.ɵɵsanitizeUrl);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.newRankCardToPush.ranks);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngForOf\", ctx.newRankCardToPush.bonusDetails);\n        }\n      },\n      dependencies: [i2.NgForOf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i4.RatingInputComponent],\n      encapsulation: 2\n    });\n  }\n  return AddRankCardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}